# 3D 路径编辑器 - 曲线渲染功能使用指南

## 快速开始

### 第一步：导入 STEP 文件

1. 点击工具栏的 **?? 导入STEP** 按钮，或按 `Ctrl+I`
2. 选择您的 STEP 文件（`.step` 或 `.stp` 格式）
3. 系统自动提取曲线并显示在左侧曲线列表

> **注意**：当前版本使用模拟数据进行测试，会自动生成 3 条示例曲线

### 第二步：查看曲线

导入成功后，您会看到：

**左侧面板**：
- 曲线列表（usv_01, usv_02, usv_03...）
- 已放样的曲线显示 ? 标记

**右侧 3D 视图**：
- **蓝色线条和点** = 导入的曲线
- 点击曲线列表项可选中曲线

### 第三步：管理曲线

#### 自动命名所有曲线
- 点击 **??? 自动命名** 按钮
- 所有曲线按 `usv_01`, `usv_02`... 格式命名

#### 重命名单条曲线
- 选中曲线
- 点击 **?? 重命名** 按钮
- 输入新名称

#### 删除曲线
- 选中曲线
- 点击 **??? 删除曲线** 按钮

### 第四步：设置放样参数

**放样点数设置**（左侧面板）：
- 使用滑块调整点数（5 - 100）
- 或直接在文本框输入数字
- 这将作为后续曲线的默认设置

### 第五步：放样曲线

#### 单条曲线放样
1. 在列表中选择一条曲线（变为橙色高亮）
2. 点击 **?? 放样** 按钮，或按 `Ctrl+L`
3. 系统生成等距分布的控制点
4. 3D 视图自动更新显示

#### 批量放样所有曲线
1. 点击 **?? 放样全部** 按钮，或按 `Ctrl+Shift+L`
2. 所有未放样的曲线都将被处理
3. 已放样的曲线显示 ? 标记

### 第六步：生成步骤列表

1. 确保至少有一条曲线已放样
2. 点击 **?? 生成步骤** 按钮，或按 `Ctrl+G`
3. 系统自动生成步骤列表：
   - Step 1: 所有曲线的第 1 个点
   - Step 2: 所有曲线的第 2 个点
   - ...

**中间面板会显示**：
- 上方：步骤树形列表
- 下方：选中步骤的 USV 详细数据

### 第七步：导出 XML

1. 点击 **?? 导出** 按钮，或按 `Ctrl+S`
2. 选择保存位置
3. 文件导出完成

---

## 3D 视图操作

### 相机控制

| 操作 | 功能 |
|------|------|
| **中键拖动** | 旋转视图（围绕场景中心） |
| **Shift + 中键拖动** | 平移视图 |
| **滚轮向前** | 放大 |
| **滚轮向后** | 缩小 |

### 快捷键

| 按键 | 功能 |
|------|------|
| `F` | 自适应视图（显示所有曲线） |
| `Ctrl+I` | 导入 STEP 文件 |
| `Ctrl+L` | 放样选中曲线 |
| `Ctrl+Shift+L` | 放样所有曲线 |
| `Ctrl+G` | 生成步骤列表 |
| `Ctrl+S` | 导出 XML |

---

## 可视化效果说明

### 曲线显示

**未选中的曲线**：
- 颜色：蓝色
- 线条粗细：2px
- 点大小：正常

**选中的曲线**：
- 颜色：橙色
- 线条粗细：3px（更粗）
- 点大小：放大 1.2 倍

### 放样前后对比

| 状态 | 显示内容 |
|------|----------|
| **放样前** | 原始导入的点（可能分布不均匀） |
| **放样后** | 等距采样的点（分布均匀） |
| **已放样** | 列表中显示 ? 标记 |

---

## 工作流程示例

### 场景 1：从 STEP 文件创建路径

```
1. 导入 STEP 文件 (Ctrl+I)
   → 看到 3 条蓝色曲线出现在 3D 视图

2. 自动命名 (???)
   → 曲线命名为 usv_01, usv_02, usv_03

3. 设置放样点数为 20
   → 左侧滑块调到 20

4. 放样所有曲线 (Ctrl+Shift+L)
   → 所有曲线旁边出现 ? 标记
   → 3D 视图更新为 20 个等距点

5. 生成步骤 (Ctrl+G)
   → 生成 20 个步骤
   → 每个步骤包含 3 个 USV 的坐标

6. 导出 XML (Ctrl+S)
   → 保存为 cluster.xml
```

### 场景 2：修改特定曲线

```
1. 在列表中点击 usv_02
   → usv_02 变为橙色高亮

2. 按 F 键
   → 视图自动聚焦到该曲线

3. 修改放样点数为 15

4. 重新放样该曲线 (Ctrl+L)
   → 只有 usv_02 更新为 15 个点

5. 重新生成步骤 (Ctrl+G)
   → 步骤数量自动调整为最大点数
```

---

## 常见问题

### Q: 为什么看不到曲线？
A: 
1. 确认已成功导入 STEP 文件
2. 按 `F` 键自适应视图
3. 检查左侧曲线列表是否有数据

### Q: 如何查看曲线详情？
A:
1. 在列表中选中曲线（变橙色）
2. 使用中键旋转视图查看
3. 用滚轮放大查看细节

### Q: 放样后点太少/太多？
A:
1. 调整左侧的"放样点数设置"滑块
2. 重新放样该曲线
3. 3D 视图会立即更新

### Q: 生成步骤失败？
A:
1. 确保至少有一条曲线已放样（有 ? 标记）
2. 已放样的曲线才能生成步骤
3. 使用 Ctrl+Shift+L 批量放样所有曲线

### Q: 如何恢复默认视图？
A:
- 按 `F` 键自适应视图
- 或重新导入 STEP 文件

---

## 提示与技巧

### ?? 提示 1：高效的工作流程
```
导入 → 自动命名 → 设置点数 → 批量放样 → 生成 → 导出
```
使用快捷键可以大大提高效率！

### ?? 提示 2：视图聚焦
选中曲线后按 `F` 键，可以快速聚焦到该曲线。

### ?? 提示 3：精确控制
- 对不同曲线可以设置不同的放样点数
- 先调整滑块，再放样该曲线

### ?? 提示 4：数据验证
- 导出前检查中间面板的 USV 数据表
- 确保所有坐标和参数正确

---

## 状态栏信息

窗口底部的状态栏显示：

| 信息 | 说明 |
|------|------|
| **左侧** | 当前操作状态提示 |
| **右侧** | 曲线数: X \| 步骤数: Y |

---

## 下一步

- 查看 [README_NEW_DESIGN.md](README_NEW_DESIGN.md) 了解系统架构
- 查看 [3D曲线渲染功能总结.md](3D曲线渲染功能总结.md) 了解技术细节
- 查看 [重构总结.md](重构总结.md) 了解项目重构过程

---

**有问题？** 查看 [GitHub Issues](https://github.com/chenhangwei/Path/issues)

**祝您使用愉快！** ??
