# UG NX 风格 3D 操作指南

## 概述
本应用的 3D 视图已优化为类似 UG NX 的操作方式，提供更专业的建模体验。

## 鼠标操作

### 视图控制

| 操作 | 功能 | 说明 |
|------|------|------|
| **中键拖动** | 旋转视图 | 以场景中心为中心旋转 3D 视图 |
| **Shift + 中键拖动** | 平移视图 | 在当前视平面上平移视图 |
| **滚轮** | 缩放视图 | 以鼠标位置为中心缩放（智能缩放）|

### 对象操作

| 操作 | 功能 | 说明 |
|------|------|------|
| **左键单击控制点** | 选择点 | 选中控制点，可显示 Gizmo |
| **左键拖拽控制点** | 移动点 | 在 XY 平面上自由拖动控制点 |
| **右键单击控制点** | 删除点 | 删除选中的控制点 |
| **Shift + 左键点击线段** | 插入点 | 在线段上插入新的控制点 |
| **左键单击空白处** | 取消选择 | 取消当前选择 |

## 键盘快捷键

### 视图快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| **F** | 适应窗口 | 自动调整视图以显示所有对象 |
| **Ctrl + 1** | 顶视图 | 切换到顶视图（俯视图）|
| **Ctrl + 2** | 前视图 | 切换到前视图 |
| **Ctrl + 3** | 右视图 | 切换到右视图 |
| **Ctrl + 4** | 等轴测视图 | 切换到等轴测视图（默认视图）|
| **Home** | 重置视图 | 重置到初始等轴测视图并适应窗口 |

### 编辑快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| **Ctrl** + 拖拽 Gizmo | 本地坐标系 | 使用本地坐标系而非全局坐标系 |
| **Shift** + 拖拽 Gizmo | 平面拖动 | 在平面上拖动而非沿轴 |

## 智能捕捉功能

系统提供多种捕捉模式，帮助精确定位：

### 捕捉类型

1. **网格捕捉**（灰色）
   - 自动对齐到网格点
   - 网格间距可配置

2. **端点捕捉**（红色）
   - 捕捉到线段的端点
   - 最高优先级

3. **控制点捕捉**（绿色）
   - 捕捉到现有控制点
   - 高优先级

4. **中点捕捉**（青色）
   - 捕捉到线段中点
   - 中等优先级

5. **投影捕捉**（洋红色）
   - 捕捉到线段上的投影点
   - 低优先级

### 捕捉指示器

当捕捉激活时，会显示：
- 半透明球体（捕捉点位置）
- 十字线指示器
- 坐标标签（显示捕捉类型和坐标）

## 相机模式

### 透视相机（默认）
- 提供真实的 3D 深度感
- 适合建模和编辑
- 视场角：45°

### 视图选项
- **检查模式**：相机围绕对象旋转
- **坐标系显示**：显示全局 XYZ 坐标系
- **视图立方体**：快速切换标准视图

## 操作技巧

### 精确建模
1. **使用智能捕捉**：启用端点和网格捕捉确保精确对齐
2. **利用标准视图**：使用 Ctrl+1/2/3 切换到正交视图进行精确操作
3. **适应窗口**：按 F 键快速查看整体

### 高效编辑
1. **右键快速删除**：无需菜单，直接右键点击删除
2. **Shift+左键插入**：快速在线段上添加控制点
3. **中键操作**：左手控制视图，右手编辑对象

### 视图管理
1. **常用视图**：为不同任务设置不同的标准视图
2. **重置视图**：迷失方向时按 Home 键重置
3. **智能缩放**：滚轮缩放时会以鼠标位置为中心

## 与 UG NX 的对比

| 功能 | UG NX | 本应用 | 说明 |
|------|-------|--------|------|
| 旋转视图 | 中键拖动 | ? 中键拖动 | 完全一致 |
| 平移视图 | Shift+中键 | ? Shift+中键 | 完全一致 |
| 缩放视图 | 滚轮 | ? 滚轮 | 智能缩放 |
| 标准视图 | Ctrl+数字 | ? Ctrl+数字 | 快捷键一致 |
| 适应窗口 | Ctrl+F | ? F | 简化操作 |
| 对象选择 | 左键 | ? 左键 | 完全一致 |
| 快速删除 | Delete | ? 右键 | 更快捷 |

## 性能优化建议

### 大场景处理
1. **降低网格密度**：调整 GridSpacing 参数
2. **隐藏不必要的元素**：临时隐藏采样点
3. **使用标准视图**：正交视图性能更好

### 流畅操作
1. **避免频繁缩放**：使用标准视图代替频繁缩放
2. **合理使用捕捉**：仅在需要时启用捕捉功能
3. **及时释放资源**：完成编辑后及时保存

## 常见问题

### Q: 视图旋转不流畅？
A: 检查是否有大量控制点，考虑简化模型或提升硬件性能。

### Q: 无法精确选中点？
A: 启用智能捕捉，或者放大视图后再操作。

### Q: 视图混乱了怎么办？
A: 按 Home 键重置视图到初始状态。

### Q: 如何快速定位到某个对象？
A: 选中对象后按 F 键，视图会自动适应选中对象。

### Q: 中键不能旋转？
A: 确保不是在 Shift+中键模式（平移模式），松开 Shift 键再试。

## 高级功能

### Gizmo 操作（待实现）
- 三轴箭头控制器
- 沿单轴拖动
- 平面内拖动
- 本地/全局坐标系切换

### 多选操作（待实现）
- Ctrl+左键多选
- 框选功能
- 批量编辑

### 测量工具（待实现）
- 距离测量
- 角度测量
- 坐标显示

## 自定义设置

可在代码中调整以下参数：

```csharp
// 视觉缩放比例
private const double _visualScale = 0.1;

// 网格间距
private double _gridSpacing = 2.0;

// 网格大小
private int _gridSize = 200;

// 相机视场角
FieldOfView = 45;

// 旋转灵敏度
var sensitivity = 0.3;

// 捕捉阈值
var threshold = 5.0 * _visualScale;
```

## 总结

本 3D 编辑器采用了 UG NX 的经典操作方式，旨在为专业用户提供熟悉且高效的建模体验。通过合理使用快捷键、智能捕捉和标准视图，可以大大提升工作效率。

**记住核心操作**：
- 中键旋转
- Shift+中键平移
- 滚轮缩放
- F 键适应
- Ctrl+数字切换视图

祝您建模愉快！??
