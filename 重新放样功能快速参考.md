# 重新放样功能快速参考

## ? 功能已实现

**功能**: 支持对已放样的曲线再次进行放样

**方式**: 智能检测 + 用户确认

---

## ?? 使用方法

### 单条曲线重新放样

```
步骤:
1. 选中已放样的曲线
2. （可选）修改放样点数
3. 点击"放样选中"或工具栏按钮
4. ? 弹出确认对话框
5. 选择"是"→ 重新放样
   选择"否"→ 取消操作
```

### 批量重新放样

```
步骤:
1. 有多条曲线，部分已放样
2. （可选）修改放样点数设置
3. 点击"放样全部"
4. ? 弹出确认对话框
5. 选择：
   - 是 → 重新放样所有曲线
   - 否 → 只放样未放样的曲线
```

---

## ?? 确认对话框

### 单条曲线

```
曲线 usv_01 已经放样过。

是否重新放样？

当前放样点数: 10

        [是]    [否]
```

### 批量放样

```
检测到 3 条曲线已经放样过：

  ? usv_01
? usv_02
  ? usv_03

是否重新放样这些曲线？

选择：
? 是 - 重新放样所有曲线（包括已放样的）
? 否 - 只放样未放样的曲线

        [是]    [否]
```

---

## ?? 典型场景

### 场景1: 修改点数后重新放样

```
1. 已放样（10个点）
2. 修改放样点数为 20
3. 点击"放样全部"
4. ? 确认重新放样
5. 结果：20个点 ?
```

### 场景2: 只放样未放样的

```
1. 5条曲线，3条已放样
2. 修改放样点数为 15
3. 点击"放样全部"
4. ? 选择"否"
5. 结果：
   - 已放样的3条: 保持原点数
   - 未放样的2条: 15个点 ?
```

### 场景3: 全部重新放样

```
1. 所有曲线已放样（10个点）
2. 修改放样点数为 30
3. 点击"放样全部"
4. ? 选择"是"
5. 结果：所有曲线30个点 ?
```

---

## ?? 工作原理

### 检测逻辑

```
if (curve.IsLofted)
{
    // 已放样 → 询问用户
}
else
{
    // 未放样 → 直接放样
}
```

### 用户选择

```
选择"是":
- 重新放样 ?
- 使用新的点数设置

选择"否":
- 取消操作
- 保持原有数据
```

---

## ? 特性

```
? 安全：总是询问用户
? 灵活：支持选择性放样
? 智能：自动检测状态
? 友好：清晰的提示信息
```

---

## ?? 注意事项

### 放样点数来源

```
重要:
- 每条曲线有自己的 LoftPointCount
- 修改"放样点数设置"只影响未放样曲线
- 已放样曲线需要重新放样才会更新
```

### 步骤数据

```
警告:
- 重新放样后，点数可能改变
- 如果已生成步骤，建议重新生成

建议流程:
1. 重新放样曲线
2. 清除所有步骤
3. 重新生成步骤
```

---

## ?? 状态栏提示

```
重新放样:
→ "已重新放样 3 条曲线"

只放样未放样:
→ "已放样 2 条曲线"

取消操作:
→ "已取消重新放样"
```

---

**详细说明**: `曲线重新放样功能实现说明.md`  
**状态**: ? 已实现
