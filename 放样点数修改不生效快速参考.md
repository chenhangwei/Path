# 放样点数修改不生效快速参考

## ? 问题

```
症状:
1. 已放样曲线（10个点）
2. 修改放样点数为 20
3. 重新放样
4. ? 还是 10 个点
```

---

## ?? 原因

```csharp
// 问题代码
partial void OnDefaultLoftPointCountChanged(int value)
{
    foreach (var curve in Curves)
    {
        if (!curve.IsLofted)  // ? 跳过已放样曲线
        {
      curve.LoftPointCount = value;
        }
    }
}
```

**问题**:
```
已放样曲线的 LoftPointCount 不会更新
重新放样时使用的还是旧值
```

---

## ? 修复

```csharp
// 修复后
partial void OnDefaultLoftPointCountChanged(int value)
{
    foreach (var curve in Curves)
    {
        // ? 更新所有曲线
    curve.LoftPointCount = value;
    }
}
```

**改进**:
```
移除 IsLofted 判断
所有曲线都会更新点数
重新放样使用新值
```

---

## ?? 效果

### 修复前

```
1. 放样（10点）
2. 修改设置为 20
3. ? curve.LoftPointCount = 10（未更新）
4. 重新放样 → ? 还是 10 点
```

### 修复后

```
1. 放样（10点）
2. 修改设置为 20
3. ? curve.LoftPointCount = 20（已更新）
4. 重新放样 → ? 变成 20 点
```

---

## ? 验证

```
测试:
1. 放样曲线（10个点）
2. 修改放样点数为 25
3. 重新放样

预期:
? 每条曲线现在有 25 个点
? LoftPointCount = 25
? LoftedPoints.Count = 25
```

---

**详细说明**: `放样点数修改不生效问题修复说明.md`  
**状态**: ? 已修复
